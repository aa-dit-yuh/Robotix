language: python

services:
    - postgresql memcached

env:
    - DATABASE_URL='postgres://postgres:@localhost:5432/robotix' DJANGO_SECRET_KEY='tT\xd7\xb06\xf7\x9b\xff\x0fZL\xca\xca\x11\xefM\xacr\xfb\xdf\xca\x9b' DJANGO_SETTINGS_MODULE='config.settings.production'

python:
    - '3.4'
    - '2.7'
    - 'nightly'

addons:
    postgresql: '9.3'

install:
    - pip install -r requirements.txt
    - pip install coverage

before_script:
    - psql -c 'create database robotix;' -U postgres
    - python manage.py migrate --noinput
    - python manage.py collectstatic --noinput

script:
    - coverage run ./manage.py test

after_success:
    - coveralls
